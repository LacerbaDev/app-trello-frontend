(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{46:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var r,a,c,i,o,s,u,d=t(0),p=t.n(d),l=t(16),b=t.n(l),f=t(8),h=t(32),j=t(5),x=t(6),g=t(9),O=t(2),m=t.n(O),v=t(4),k=t(1),w=Object(d.createContext)({login:function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},token:void 0}),y=function(e){var n=e.children,t=Object(d.useState)("auth"),r=Object(g.a)(t,2),a=r[0],c=(r[1],function(){var e=Object(v.a)(m.a.mark((function e(n,t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}());return Object(k.jsx)(w.Provider,{value:{token:a,login:c,logout:function(){}},children:n})},D=function(){return Object(d.useContext)(w)},C=x.a.nav(r||(r=Object(j.a)(["\n  background-color: black;\n  color: white;\n  height: 60px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  .spacer {\n    flex-grow: 1;\n  }\n  button {\n    border: 1px solid rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:hover {\n      border: 1px solid white;\n    }\n    background: none;\n    color: white;\n    padding: 10px;\n    font-size: 12pt;\n    font-weight: bold;\n  }\n"]))),S=function(){var e=D().logout;return Object(k.jsxs)(C,{children:[Object(k.jsx)("p",{children:"Lacerba d&d"}),Object(k.jsx)("button",{onClick:e,children:"logout"})]})},I=t(14),q=x.a.div(a||(a=Object(j.a)(["\n  font-size: 12px;\n  padding: 5px;\n  border: 1px solid #ccc;\n  background-color: ",";\n  margin: 2px;\n  display: flex;\n  justify-content: space-between;\n"])),(function(e){return e.isDragging?"lightgreen":"white"})),P=function(e){var n=e.text,t=e.id,r=e.index,a=e.onDelete;return Object(k.jsx)("div",{children:Object(k.jsx)(I.b,{draggableId:t,index:r,children:function(e,t){return Object(k.jsx)("div",Object(f.a)(Object(f.a)(Object(f.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(k.jsxs)(q,{isDragging:t.isDragging,children:[Object(k.jsx)("span",{children:n}),Object(k.jsx)(z,{onClick:a,children:" x "})]})}))}})})},z=x.a.button(c||(c=Object(j.a)(["\n  display: flex;\n  background-color: #ff4d4d;\n  color: white;\n  font-size: 15px;\n  font-weight: bold;\n  border: none;\n  border-radius: 5px;\n  width: 20px;\n  height: 20px;\n  place-content: center;\n  margin: 0;\n  padding: 0;\n  &:hover {\n    background-color: #ff1414;\n  }\n"]))),R=t(13),L=function(e){var n=e.create,t=Object(R.a)(),r=t.handleSubmit,a=t.register,c=t.control;return Object(k.jsxs)(V,{onSubmit:r((function(e){n(e.name),c.setValue("name","")})),children:[Object(k.jsx)("input",{type:"text",name:"name",placeholder:"Crea contenuto",defaultValue:"",ref:a({required:!0})}),Object(k.jsx)("input",{type:"submit"})]})},V=x.a.form(i||(i=Object(j.a)(['\n  padding: 10px;\n  display: flex;\n\n  input[type="text"] {\n    flex: 1;\n    border: 0;\n    background: #f1f1f1;\n    padding: 10px;\n    border-radius: 7px 0 0 7px;\n  }\n  input[type="submit"] {\n    border: 0;\n    background: #1ec87b;\n    padding: 10px;\n    border-radius: 0 7px 7px 0;\n    font-weight: bold;\n    color: white;\n  }\n']))),N=x.a.div(o||(o=Object(j.a)(["\n  height: 100%;\n  min-height: 400px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  overflow-y: scroll;\n  flex-grow: 1;\n  h2 {\n    margin: 0;\n    padding: 10px 0;\n    border-bottom: 1px solid #ccc;\n    font-size: 15px;\n    text-align: center;\n  }\n"]))),J=x.a.div(s||(s=Object(j.a)(["\n  background-color: ",";\n  height: 100%;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n"])),(function(e){return e.isDraggingOver?"lightblue":"white"})),A=function(e){var n=e.id,t=e.name,r=e.contents,a=e.index,c=e.createContent,i=e.deleteContent,o=e.onDelete;return Object(k.jsx)(I.b,{draggableId:n,index:a,children:function(e,a){return Object(k.jsxs)(N,Object(f.a)(Object(f.a)({},e.draggableProps),{},{ref:e.innerRef,children:[Object(k.jsx)("h2",Object(f.a)(Object(f.a)({},e.dragHandleProps),{},{children:t})),0===r.length&&Object(k.jsx)(B,{onClick:o,children:"Delete"}),Object(k.jsx)(I.c,{droppableId:n,type:"content",children:function(e,n){return Object(k.jsxs)(J,Object(f.a)(Object(f.a)({isDraggingOver:n.isDraggingOver,ref:e.innerRef},e.droppableProps),{},{children:[r.map((function(e,n){return Object(k.jsx)(P,{onDelete:function(){return i(e.id)},id:e.id,index:n,text:e.text},e.id)})),e.placeholder]}))}}),Object(k.jsx)(L,{create:c})]}))}})},B=x.a.button(u||(u=Object(j.a)(["\n  margin: 2px;\n  background-color: #ff4d4d;\n  color: white;\n  font-size: 10px;\n  font-weight: bold;\n  border: none;\n  border-radius: 5px;\n  padding: 10px 5px;\n  &:hover {\n    background-color: #ff1414;\n  }\n"]))),F=t(22),T=t(23),E=function(){function e(n){Object(F.a)(this,e),this.url=n,this._token=void 0}return Object(T.a)(e,[{key:"token",get:function(){return this._token}},{key:"login",value:function(){var e=Object(v.a)(m.a.mark((function e(n,t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:n,password:t})});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return a=e.sent,this._token=a.accessToken,e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(v.a)(m.a.mark((function e(n,t,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:n,password:r,name:t})});case 2:return a=e.sent,e.abrupt("return",a.ok);case 4:case"end":return e.stop()}}),e,this)})));return function(n,t,r){return e.apply(this,arguments)}}()}]),e}(),H=[{id:"ckm7nn93h0121r85cfw0k7hvm",name:"Cose da fare",position:0,contents:[{id:"ckm7ogrcf06440q5cdy08pzsi",text:"Fare la spesa",position:0,dashboardId:"ckm7nn93h0121r85cfw0k7hvm"},{id:"ckm7ojpvv01604t5cnsnl4k0s",text:"Riparare il tostapane",position:1,dashboardId:"ckm7nn93h0121r85cfw0k7hvm"}]},{id:"ckm0w9ba50045km5cuwgdw3ee",name:"Cose in progress",position:1,contents:[{id:"ckm0w9ba10020km5c44n29xyr",text:"Portare fuori il cane",position:0,dashboardId:"ckm0w9ba50045km5cuwgdw3ee"},{id:"ckm7m3ici0031s65cmyulhp53",text:"Imparare con i corsi Lacerba",position:1,dashboardId:"ckm0w9ba50045km5cuwgdw3ee"}]},{id:"ckm7of1cc05370q5cq34eqnyj",name:"Cose fatte",position:2,contents:[{id:"ckm7ok1cg03314t5cnjvj8s2m",text:"Prenotare vacanze",position:0,dashboardId:"ckm7of1cc05370q5cq34eqnyj"}]},{id:"ckm7ojxhs03004t5c4r9ffpvj",name:"New Dashboard",position:3,contents:[{id:"ckm7ojzpm03154t5cosyq5wwc",text:"Boh...",position:0,dashboardId:"ckm7ojxhs03004t5c4r9ffpvj"}]}],M=function(){function e(n){Object(F.a)(this,e),this.url=n}return Object(T.a)(e,[{key:"getDashboards",value:function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(JSON.stringify(H)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createContent",value:function(){var e=Object(v.a)(m.a.mark((function e(n,t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=H.find((function(e){return e.id===t})))&&(console.log("adding",n),r.contents.push({dashboardId:t,id:U(40),position:null===r||void 0===r?void 0:r.contents.length,text:n})),e.abrupt("return",this.getDashboards());case 3:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"createDashboard",value:function(e){return H.push({contents:[],id:U(20),name:e,position:H.length}),this.getDashboards()}},{key:"deleteContent",value:function(e,n){var t=H.find((function(e){return e.id===n}));return t&&(t.contents=t.contents.filter((function(n){return n.id!==e}))),this.getDashboards()}},{key:"deleteDashboard",value:function(e){return H=H.filter((function(n){return n.id!==e})),this.getDashboards()}},{key:"moveDashboard",value:function(e,n){var t=H.findIndex((function(n){return n.id===e}));if(t>=0){var r=H.splice(t,1),a=Object(g.a)(r,1)[0];H.splice(n,0,a)}return this.getDashboards()}},{key:"moveContent",value:function(){var e=Object(v.a)(m.a.mark((function e(n,t,r,a){var c,i,o,s,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=H.find((function(e){return e.id===n}))){e.next=3;break}return e.abrupt("return",this.getDashboards());case 3:if(i=H.find((function(e){return e.id===r}))){e.next=6;break}return e.abrupt("return",this.getDashboards());case 6:if(-1!==(o=c.contents.findIndex((function(e){return e.id===t})))){e.next=9;break}return e.abrupt("return",this.getDashboards());case 9:return s=c.contents.splice(o,1),u=Object(g.a)(s,1),d=u[0],i.contents.splice(a,0,d),e.abrupt("return",this.getDashboards());case 12:case"end":return e.stop()}}),e,this)})));return function(n,t,r,a){return e.apply(this,arguments)}}()}]),e}();function U(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length,a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*r));return n}var _,G,K="http://localhost:4000",Q=new E("".concat(K,"/auth")),W=new M("".concat(K,"/app")),X=x.a.div(_||(_=Object(j.a)([""]))),Y=function(e){var n=e.onCreate,t=Object(R.a)(),r=t.register,a=t.handleSubmit,c=t.control;return Object(k.jsxs)(X,{children:[Object(k.jsx)("h2",{children:"Crea Dashboard"}),Object(k.jsxs)("form",{onSubmit:a((function(e){n(e.title),c.setValue("title","")})),children:[Object(k.jsx)("input",{name:"title",ref:r({required:!0,maxLength:20})}),Object(k.jsx)("button",{type:"submit",children:" Crea "})]})]})},Z=x.a.div(G||(G=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 10px;\n  overflow-y: scroll;\n"])));function $(){var e=Object(d.useState)([]),n=Object(g.a)(e,2),t=n[0],r=n[1];function a(e){return c.apply(this,arguments)}function c(){return(c=Object(v.a)(m.a.mark((function e(n){var t,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.destination){e.next=2;break}return e.abrupt("return");case 2:return t=n.destination.index,a=n.draggableId,e.next=6,W.moveDashboard(a,t);case 6:c=e.sent,r(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(v.a)(m.a.mark((function e(n,t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.createContent(n,t);case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.createDashboard(n);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(v.a)(m.a.mark((function e(n,t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.deleteContent(n,t);case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.deleteDashboard(n);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return l.apply(this,arguments)}function l(){return(l=Object(v.a)(m.a.mark((function e(n){var t,a,c,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.destination){e.next=2;break}return e.abrupt("return");case 2:return t=n.source.droppableId,a=n.draggableId,c=n.destination.droppableId,i=n.destination.index,e.next=8,W.moveContent(t,a,c,i);case 8:o=e.sent,r(o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("DASHBOARD"!==(t=n.type)){e.next=6;break}return e.next=4,a(n);case 4:e.next=9;break;case 6:if("content"!==t){e.next=9;break}return e.next=9,p(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getDashboards();case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(k.jsx)(I.a,{onDragEnd:function(e){return b.apply(this,arguments)},children:Object(k.jsx)(I.c,{droppableId:"list",direction:"horizontal",type:"DASHBOARD",children:function(e){return Object(k.jsxs)(Z,Object(f.a)(Object(f.a)({ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,n){return Object(d.createElement)(A,Object(f.a)(Object(f.a)({deleteContent:function(n){return function(e,n){return s.apply(this,arguments)}(n,e.id)},createContent:function(n){return function(e,n){return i.apply(this,arguments)}(n,e.id)},onDelete:function(){return function(e){return u.apply(this,arguments)}(e.id)},index:n},e),{},{key:e.id}))})),e.placeholder,Object(k.jsx)(Y,{onCreate:function(e){return function(e){return o.apply(this,arguments)}(e)}})]}))}})})}var ee,ne,te,re,ae,ce,ie,oe=t(7),se=t(19),ue=function(){var e=Object(d.useState)(!1),n=Object(g.a)(e,2),t=n[0],r=n[1],a=D(),c=a.token,i=a.login,o=Object(R.a)(),s=o.handleSubmit,u=o.register,p=function(){var e=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,i(n.email,n.password);case 3:t=e.sent,r(!t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return c?Object(k.jsx)(oe.a,{to:"/"}):Object(k.jsx)(le,{children:Object(k.jsxs)("div",{className:"login",children:[Object(k.jsx)("h1",{children:" Login User"}),Object(k.jsxs)(pe,{onSubmit:s(p),children:[Object(k.jsx)("input",{name:"email",type:"email",placeholder:"email",defaultValue:"",ref:u({required:!0})}),Object(k.jsx)("input",{name:"password",type:"password",placeholder:"password",defaultValue:"",ref:u({required:!0})}),t&&Object(k.jsx)(de,{children:"Invalid login"}),Object(k.jsx)("button",{type:"submit",children:" Login"}),Object(k.jsx)(se.b,{to:"/register",children:" Register "})]})]})})},de=x.a.p(ee||(ee=Object(j.a)(["\n  color: red;\n"]))),pe=x.a.form(ne||(ne=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  gap: 10px;\n  input {\n    height: 30px;\n    padding: 0 10px;\n  }\n  button {\n    background: #4ad2ff;\n    height: 30px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    &:hover {\n      background: #06baf6;\n    }\n  }\n"]))),le=x.a.div(te||(te=Object(j.a)(["\n  display: grid;\n  place-content: center;\n  .login {\n    border: 1px solid black;\n    margin-top: 20px;\n    padding: 20px;\n    max-width: 90%;\n    width: 800px;\n  }\n"]))),be=function(){var e=Object(d.useState)(!1),n=Object(g.a)(e,2),t=n[0],r=n[1],a=Object(d.useState)(!1),c=Object(g.a)(a,2),i=c[0],o=c[1],s=D().token,u=Object(R.a)(),p=u.handleSubmit,l=u.register,b=function(){var e=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,Q.register(n.email,n.name,n.password);case 3:t=e.sent,r(!t),t&&o(!0);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return s?Object(k.jsx)(oe.a,{to:"/"}):i?Object(k.jsx)(oe.a,{to:"/login"}):Object(k.jsx)(je,{children:Object(k.jsxs)("div",{className:"login",children:[Object(k.jsx)("h1",{children:" Register User"}),Object(k.jsxs)(he,{onSubmit:p(b),children:[Object(k.jsx)("input",{name:"name",type:"name",placeholder:"name",defaultValue:"",ref:l({required:!0})}),Object(k.jsx)("input",{name:"email",type:"email",placeholder:"email",defaultValue:"",ref:l({required:!0})}),Object(k.jsx)("input",{name:"password",type:"password",placeholder:"password",defaultValue:"",ref:l({required:!0})}),t&&Object(k.jsx)(fe,{children:"Invalid register"}),Object(k.jsx)("button",{type:"submit",children:" Register "}),Object(k.jsx)(se.b,{to:"/login",children:" Login "})]})]})})},fe=x.a.p(re||(re=Object(j.a)(["\n  color: red;\n"]))),he=x.a.form(ae||(ae=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  gap: 10px;\n  input {\n    height: 30px;\n    padding: 0 10px;\n  }\n  button {\n    background: #4ad2ff;\n    height: 30px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    &:hover {\n      background: #06baf6;\n    }\n  }\n"]))),je=x.a.div(ce||(ce=Object(j.a)(["\n  display: grid;\n  place-content: center;\n  .login {\n    border: 1px solid black;\n    margin-top: 20px;\n    padding: 20px;\n    max-width: 90%;\n    width: 800px;\n  }\n"]))),xe=x.a.div(ie||(ie=Object(j.a)(["\n  padding: 20px;\n"])));var ge=function(){return Object(k.jsx)(se.a,{children:Object(k.jsxs)(oe.d,{children:[Object(k.jsx)(oe.b,{path:"/login",children:Object(k.jsx)(ue,{})}),Object(k.jsx)(oe.b,{path:"/register",children:Object(k.jsx)(be,{})}),Object(k.jsxs)(Oe,{path:"/",children:[Object(k.jsx)(S,{}),Object(k.jsx)(xe,{children:Object(k.jsx)($,{})})]})]})})},Oe=function(e){var n=e.children,t=Object(h.a)(e,["children"]),r=D();return Object(k.jsx)(oe.b,Object(f.a)(Object(f.a)({},t),{},{render:function(e){var t=e.location;return r.token?n:Object(k.jsx)(oe.a,{to:{pathname:"/login",state:{from:t}}})}}))},me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,48)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))};t(46);b.a.render(Object(k.jsx)(p.a.StrictMode,{children:Object(k.jsx)(y,{children:Object(k.jsx)(ge,{})})}),document.getElementById("root")),me()}},[[47,1,2]]]);
//# sourceMappingURL=main.36fa29a3.chunk.js.map